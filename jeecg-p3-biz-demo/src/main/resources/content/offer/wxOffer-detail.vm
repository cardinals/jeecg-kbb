<!DOCTYPE html>
<html lang="en">
#parse("content/base/back/common/head.vm")
<body style='overflow:scroll;overflow-x:hidden'>
	<div class="container bs-docs-container" style="width:100%;">
			<form class="form-horizontal" role="form" id="dailogForm" action="$!{basePath}/p3/wxOffer.do?doAdd" method="POST">
			<fieldset disabled="disabled">
				<input type="hidden" id="btn_sub" class="btn_sub" />
				<h2 style="text-align: center;">报价单</h2>
				<!--表头-->
				<div class="row">
					<div class="panel panel-default">
						<!--<div class="panel-heading">新增</div>-->
						<div class="panel-body">							
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">单号</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fbillno}" name="fbillno" id="fbillno" class="form-control-text" datatype="*" readonly="readonly"/>
								</div>
							</div>
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">项目</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fprojectid}" name="fprojectid" id="fprojectid" class="form-control-text" datatype="*" />
								</div>
							</div>
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">客户</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fcustid}" name="fcustid" id="fcustid" class="form-control-text" datatype="*" />
								</div>
							</div>
						
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">申请人</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fapplicant}" name="fapplicant" id="fapplicant" class="form-control-text" datatype="*" readonly="readonly"/>
								</div>
							</div>
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">申请时间</label>
								<div class="col-sm-8">
									<input type="text" value="$!dateTool.format(" yyyy-MM-dd HH:mm:ss ",$!{wxOffer.fapplicant_date})" 
									name="fapplicant_date" id="fapplicant_date" class="form-control-text" 
									onFocus="WdatePicker({dateFmt:'yyyy-MM-dd HH:mm:ss'})" datatype="*" 
									style="background: url(img/datetime.png') no-repeat scroll right center transparent;" readonly="readonly"/>
								</div>
							</div>
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">状态</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fstatus}" name="fstatus" id="fstatus" class="form-control-text" datatype="*" readonly="readonly"/>
								</div>
							</div>
							<div class="form-group mno">
								<label for="inputEmail3" class="col-sm-4 control-label" style="text-align:left;">当前审批人</label>
								<div class="col-sm-8">
									<input type="text" value="$!{wxOffer.fcurrent_approver}" name="fcurrent_approver" id="fcurrent_approver" class="form-control-text" datatype="*" readonly="readonly"/>
								</div>
							</div>	
													
						</div>
					</div>
				</div>
				
				<div class="row">
					<div class="btn-row">
						<a href="javascript:void(0);" onclick="$('.panel-collapse').collapse('show');"><i class="fa fa-plus"></i>展开全部</a>
						<a href="javascript:void(0);" onclick="$('.panel-collapse').collapse('hide');"><i class="fa fa-minus"></i>收缩全部</a>
					</div>
				</div>
				<!--门型-->
				<div class="row">
					<div class="panel panel-default">
						<!--<div class="panel-heading">其它选项</div>-->
						<div class="panel-heading">							
							<a data-toggle="collapse"  href="#collapse0">
								旋转门及选项
							</a>		
							<input id="groupInfo1sSumAmount" type="hidden" />
							<div  id="groupInfo1sSumAmountDisplay" class="panel-amount">
								0.00
							</div>	
						</div>
						<div id="collapse0" class="panel-collapse collapse in">
						<div class="panel-body">				
<!-- 							<button type="button" id="revolution_add" class="btn btn-primary btn-sm"><i class="fa fa-plus"></i> 添加</button> -->
							<!--<button type="button" id="doorModel_del" class="btn btn-default btn-sm"><i class="fa fa-trash-o"></i> 删除</button>-->
							<table id="revolution_table" class="table table-striped" style="margin-top: 5px;">
								<thead>
									<th>序号</th>
									<th>门型编号</th>
									<th>名称</th>
									<th>数量</th>
									<th>价格</th>
									<th>金额</th>
									<th>备注</th>
									<th>操作</th>
								</thead>
									<tbody>	
									#if($!{revolutionDoor})
									#foreach($!{door} in $!{revolutionDoor})
									<tr name="revolutionDoor[$!{door.findex}]" id="revolutionDoor[$!{door.findex}]">
										<td>
											<input type="hidden" name="revolutionDoor[$!{door.findex}].findex" id="revolutionDoor[$!{door.findex}].findex" value="$!{door.findex}">
											<div name="xh">$!{door.findex}</div>
										</td>						
										<td>
											<input type="hidden" name="revolutionDoor[$!{door.findex}].item_id" 
											id="revolutionDoor[$!{door.findex}].item_id" value="$!{door.item_id}">
											<input type="text"  name="revolutionDoor[$!{door.findex}].item_number"
											id = "revolutionDoor[$!{door.findex}].item_number" value="$!{door.item_number}"
										    datatype="*" />
										</td>
										<td>
											<input type="text"  name="revolutionDoor[$!{door.findex}].item_name"
											id = "revolutionDoor[$!{door.findex}].item_name" value="$!{door.item_name}"
										    datatype="*" />
										</td>
										<td>
											<input type="number"  name="revolutionDoor[$!{door.findex}].quantity"
											id = "revolutionDoor[$!{door.findex}].quantity"			 value="$!{door.quantity}"			    
											 onChange="calRevolutionDoorAmount('$!{door.findex}')" />
										</td>
										<td>
											<input type="number"  name="revolutionDoor[$!{door.findex}].price"
											id = "revolutionDoor[$!{door.findex}].price"		 value="$!{door.price}"				 
											ignore="ignore" onChange="calRevolutionDoorAmount('$!{door.findex}')" />
										</td>
										<td>
											<input type="number"  name="revolutionDoor[$!{door.findex}].amount"
											id = "revolutionDoor[$!{door.findex}].amount"		 value="$!{door.amount}"				 
											readonly="readonly" ignore="ignore"/>
										</td>
										<td>
											<input type="text"  name="revolutionDoor[$!{door.findex}].fremark"
											id = "revolutionDoor[$!{door.findex}].fremark" value="$!{door.fremark}"
										    datatype="*" ignore="ignore"/>
										</td>
										<td class="last">
				                            <a href="detail.html"><i class="fa fa-file-o"></i> 详情</a>
										</td>
				                       </tr>
									 #end
								 #end
								</tbody>
							</table>							
						</div>
					</div>	
					</div>
				</div>		
				
				<!--工程报价-->
				<div class="row">				
					<div class="panel panel-default">
					<!--	<div class="panel-heading">平滑门系统及操作器选项</div>-->
						<div class="panel-heading">							
							<a data-toggle="collapse"  href="#collapse2">
								平滑门系统及操作器选项
							</a>	
							<input id="groupInfo2sSumAmount" type="hidden" />
							<div  id="groupInfo2sSumAmountDisplay" class="panel-amount">
								0.00
							</div>
						</div>
						<div id="collapse2" class="panel-collapse collapse">
							<div class="panel-body">							
							<table class="table table-striped" style="margin-top: 5px;">
								<thead>								
									<th>序号</th>									
									<th>名称</th>
									<th>规格</th>
									<th>单位</th>
									<th>数量</th>
									<th>单价</th>
									<th>总价</th>	
									<th>备注</th>							
								</thead>
								<tbody>
									#if($!{groupInfo2s})
									#foreach($!{info} in $!{groupInfo2s})
										<tr>
											<td>$!{info.findex}
												<input type="hidden" name="groupInfo2s[$!{info.findex}].findex"
												 value="$!{info.findex}" id="groupInfo2s[$!{info.findex}].findex">
											</td>
											<td>$!{info.fname}</td>
											<td>
												<input type="text"  name="groupInfo2s[$!{info.findex}].mdoel" 
												value="$!{info.mdoel}" id="groupInfo2s[$!{info.findex}].mdoel" 
												datatype="*" ignore="ignore"/>
											</td>
											<td>$!{info.unit}</td>
											<td>
												<input type="text"  name="groupInfo2s[$!{info.findex}].quantity" 
												value="$!{info.quantity}" id="groupInfo2s[$!{info.findex}].quantity" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('2',$!{info.findex})" ignore="ignore"/>
											</td>										
											<td>
												<input type="text"  name="groupInfo2s[$!{info.findex}].price" 
												value="$!{info.price}" id="groupInfo2s[$!{info.findex}].price" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('2',$!{info.findex})" ignore="ignore"/>
											</td>
											<td>
												<input type="text"  name="groupInfo2s[$!{info.findex}].amount" 
												value="$!{info.amount}" id="groupInfo2s[$!{info.findex}].amount" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												readonly="readonly" ignore="ignore"/>												
											</td>
											<td>
												<input type="text"  name="groupInfo2s[$!{info.findex}].remark" 
												value="$!{info.remark}" id="groupInfo2s[$!{info.findex}].remark" 
												datatype="*" ignore="ignore"/>
											</td>
										</tr>
									 #end
								 #end
								</tbody>
							</table>						
						</div>
						</div>
					</div>
					
					
					<div class="panel panel-default">
						<!--<div class="panel-heading">边门门体及门区框架部分</div>-->
						<div class="panel-heading">							
							<a data-toggle="collapse"  href="#collapse3">
								边门门体及门区框架部分
							</a>
							<input id="groupInfo3sSumAmount" type="hidden" />
							<div  id="groupInfo3sSumAmountDisplay" class="panel-amount">
								0.00
							</div>
						</div>
						<div id="collapse3" class="panel-collapse collapse">
						<div class="panel-body">							
							<table class="table table-striped" style="margin-top: 5px;">
								<thead>								
									<th>序号</th>									
									<th>名称</th>
									<th>规格</th>
									<th>单位</th>
									<th>数量</th>
									<th>单价</th>
									<th>总价</th>	
									<th>备注</th>								
								</thead>
								<tbody>
									#if($!{groupInfo3s})
									#foreach($!{info} in $!{groupInfo3s})
										<tr>
											<td>$!{info.findex}
												<input type="hidden" name="groupInfo3s[$!{info.findex}].findex"
												 value="$!{info.findex}" id="groupInfo3s[$!{info.findex}].findex">
											</td>
											<td>$!{info.fname}</td>
											<td>
												<input type="text"  name="groupInfo3s[$!{info.findex}].mdoel" 
												value="$!{info.mdoel}" id="groupInfo3s[$!{info.findex}].mdoel" 
												datatype="*" ignore="ignore"/>
											</td>
											<td>$!{info.unit}</td>
											<td>
												<input type="text"  name="groupInfo3s[$!{info.findex}].quantity" 
												value="$!{info.quantity}" id="groupInfo3s[$!{info.findex}].quantity" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('3',$!{info.findex})" ignore="ignore"/>
											</td>										
											<td>
												<input type="text"  name="groupInfo3s[$!{info.findex}].price" 
												value="$!{info.price}" id="groupInfo3s[$!{info.findex}].price" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('3',$!{info.findex})" ignore="ignore"/>
											</td>
											<td>
												<input type="text"  name="groupInfo3s[$!{info.findex}].amount" 
												value="$!{info.amount}" id="groupInfo3s[$!{info.findex}].amount" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												readonly="readonly" ignore="ignore"/>
												
											</td>
											<td>
												<input type="text"  name="groupInfo3s[$!{info.findex}].remark" 
												value="$!{info.remark}" id="groupInfo3s[$!{info.findex}].remark" 
												datatype="*" ignore="ignore"/>
											</td>
										</tr>
									 #end
								 #end
								</tbody>
							</table>						
						</div>
						</div>
					</div>
					
					
					<div class="panel panel-default">
				<!--		<div class="panel-heading">边门选项</div>-->
						<div class="panel-heading">							
							<a data-toggle="collapse"  href="#collapse4">
								边门选项
							</a>
							<input id="groupInfo4sSumAmount" type="hidden" />
							<div  id="groupInfo4sSumAmountDisplay" class="panel-amount">
								0.00
							</div>	
						</div>
						<div id="collapse4" class="panel-collapse collapse">
						<div class="panel-body">							
							<table class="table table-striped" style="margin-top: 5px;">
								<thead>								
									<th>序号</th>									
									<th>名称</th>
									<th>规格</th>
									<th>单位</th>
									<th>数量</th>
									<th>单价</th>
									<th>总价</th>
									<th>备注</th>									
								</thead>
								<tbody>
									#if($!{groupInfo4s})
									#foreach($!{info} in $!{groupInfo4s})
										<tr>
											<td>$!{info.findex}
												<input type="hidden" name="groupInfo4s[$!{info.findex}].findex"
												 value="$!{info.findex}" id="groupInfo4s[$!{info.findex}].findex">
											</td>
											<td>$!{info.fname}</td>
											<td>
												<input type="text"  name="groupInfo4s[$!{info.findex}].mdoel" 
												value="$!{info.mdoel}" id="groupInfo4s[$!{info.findex}].mdoel" 
												datatype="*" ignore="ignore"/>
											</td>
											<td>$!{info.unit}</td>
											<td>
												<input type="text"  name="groupInfo4s[$!{info.findex}].quantity" 
												value="$!{info.quantity}" id="groupInfo4s[$!{info.findex}].quantity" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('4',$!{info.findex})" ignore="ignore"/>
											</td>										
											<td>
												<input type="text"  name="groupInfo4s[$!{info.findex}].price" 
												value="$!{info.price}" id="groupInfo4s[$!{info.findex}].price" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												onChange="calEntryAmount('4',$!{info.findex})" ignore="ignore"/>
											</td>
											<td>
												<input type="text"  name="groupInfo4s[$!{info.findex}].amount" 
												value="$!{info.amount}" id="groupInfo4s[$!{info.findex}].amount" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												readonly="readonly" ignore="ignore"/>
												
											</td>
											<td>
												<input type="text"  name="groupInfo4s[$!{info.findex}].remark" 
												value="$!{info.remark}" id="groupInfo4s[$!{info.findex}].remark" 
												datatype="*" ignore="ignore"/>
											</td>
										</tr>
									 #end
								 #end
								</tbody>
							</table>						
						</div>
					</div>
					</div>
					
					<div class="panel panel-default">
						<!--<div class="panel-heading">其他费用</div>-->
						<div class="panel-heading">							
							<a data-toggle="collapse"  href="#collapse5">
								其他费用
							</a>		
							<input id="groupInfo5sSumAmount" type="hidden" />
							<div id="groupInfo5sSumAmountDisplay" class="panel-amount">
								0.00
							</div>	
						</div>
						<div id="collapse5" class="panel-collapse collapse">
						<div class="panel-body">							
							<table class="table table-striped" style="margin-top: 5px;">
								<thead>								
									<th>序号</th>									
									<th>项目</th>									
									<th>总价</th>
									<th>备注</th>								
								</thead>
								<tbody>
									#if($!{groupInfo5s})
									#foreach($!{info} in $!{groupInfo5s})
										<tr>
											<td>$!{info.findex}
												<input type="hidden" name="groupInfo5s[$!{info.findex}].findex"
												 value="$!{info.findex}" id="groupInfo5s[$!{info.findex}].findex">
											</td>
											<td>$!{info.fname}</td>											
											<td>
												<input type="text"  name="groupInfo5s[$!{info.findex}].amount" 
												value="$!{info.amount}" id="groupInfo5s[$!{info.findex}].amount" 
												datatype="/^-?[1-9]+(\.\d+)?$|^-?0(\.\d+)?$|^-?[1-9]+[0-9]*(\.\d+)?$/"
												ignore="ignore" onChange="sumAmount(5);"/>
											</td>
											<td>
												<input type="text"  name="groupInfo5s[$!{info.findex}].remark" 
												value="$!{info.remark}" id="groupInfo5s[$!{info.findex}].remark" 
												datatype="*" ignore="ignore"/>
											</td>
										</tr>
									 #end
								 #end						
								</tbody>
							</table>						
						</div>
					</div>
					</div>
					
				</div>	
				<div class="row">
					<div class="panel panel-default">
						<div class="panel-heading">项目总价						
							<input name="famount" id="famount" type="hidden" value="$!{wxOffer.famount}" />
							<div  id="famountDisplay" class="panel-amount">
								0.00
							</div>						
						</div>						
					</div>
				</div>
			</fieldset>	
				<!--提交返回按钮-->
				<div class="row btn-row">					
					<button type="button" class="btn btn-default" id="formReturn" data-dismiss="modal" onclick="doUrl('$!{basePath}/p3/wxOffer.do?list')">返回</button>
<!-- 					<button type="button" class="btn btn-primary" id="formSubmit">保存</button>				 -->
				</div>					
			
			</form>
			
			
	</div>
</body>
</html>
<link rel="stylesheet" type="text/css" href="$!{basePath}/content/offer/style.css" />
<script type="text/javascript" src="$!{basePath}/plug-in-ui/js/Validform_v5.3.2.js"></script> 
<script type="text/javascript" src="$!{basePath}/plug-in-ui/js/forminit.p3.js"></script> 
<script type="text/javascript" src="$!{basePath}/content/offer/offer-js.js"></script> 
<script >
jQuery(function(){
	sumAmount("1");
	sumAmount("2");
	sumAmount("3");
	sumAmount("4");
	sumAmount("5");
});
</script>